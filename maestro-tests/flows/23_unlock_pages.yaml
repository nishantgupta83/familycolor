# Test: Unlock Pages by Earning Stars
# ====================================
# Tests the page unlocking progression system

appId: com.familycolorfun.app

---

# Launch app
- launchApp
- assertVisible: "Category"

# Go to Nature category (has locked pages)
- tapOn: "Nature"
- assertVisible: "Nature"

- takeScreenshot: screenshots/23_unlock_01_nature_locked

# Note the locked pages (with lock icons and star requirements)
# Color first available page to earn stars

- tapOn:
    point: "25%,35%"

- extendedWaitUntil:
    visible: "Fill"
    timeout: 5000

- takeScreenshot: screenshots/23_unlock_02_nature_blank

# Color multiple regions to earn stars
# Green for grass/trees (5th color)
- tapOn:
    point: "42%,92%"
- tapOn:
    point: "40%,50%"
- tapOn:
    point: "50%,55%"
- tapOn:
    point: "60%,45%"

# Brown for tree trunk (11th color)
- tapOn:
    point: "85%,92%"
- tapOn:
    point: "50%,65%"

# Blue for sky (6th color)
- tapOn:
    point: "55%,92%"
- tapOn:
    point: "30%,20%"
- tapOn:
    point: "70%,20%"

# Yellow for sun (3rd color)
- tapOn:
    point: "25%,92%"
- tapOn:
    point: "80%,15%"

# Pink for flowers (9th color)
- tapOn:
    point: "75%,92%"
- tapOn:
    point: "25%,70%"
- tapOn:
    point: "75%,70%"

- takeScreenshot: screenshots/23_unlock_03_colored

# Check progress/stars earned
- takeScreenshot: screenshots/23_unlock_04_progress

# Exit and check if any pages unlocked
- swipe:
    start: "3%,50%"
    end: "95%,50%"
    duration: 500

- tapOn:
    text: "Save"
    optional: true
- tapOn:
    text: "Exit without saving"
    optional: true

- extendedWaitUntil:
    visible: "Nature"
    timeout: 5000
    optional: true

- takeScreenshot: screenshots/23_unlock_05_after_coloring
