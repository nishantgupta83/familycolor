# Test: Canvas Coloring Workflow
# ==============================
# Tests coloring with different colors and regions

appId: com.familycolorfun.app

---

# Launch and navigate to a coloring page
- launchApp
- assertVisible: "Category"

# Go to Animals category (visible without scrolling)
- tapOn: "Animals"
- assertVisible: "Animals"

# Wait for grid to load
- extendedWaitUntil:
    visible: ".*"
    timeout: 3000

# Tap on second page (not first for variety)
- tapOn:
    point: "70%,35%"

# Wait for canvas to load
- extendedWaitUntil:
    visible: "Fill"
    timeout: 5000

# Verify mode toggle is present
- assertVisible: "Fill"
- extendedWaitUntil:
    visible: "Draw"
    timeout: 3000

# Take screenshot of canvas
- takeScreenshot: screenshots/04_canvas_fill_mode

# Select a different color (green - 5th color)
- tapOn:
    point: "42%,92%"

# Fill first region
- tapOn:
    point: "50%,40%"

# Select orange color (2nd color)
- tapOn:
    point: "18%,92%"

# Fill another region
- tapOn:
    point: "35%,55%"

# Select purple color (8th color)
- tapOn:
    point: "65%,92%"

# Fill third region
- tapOn:
    point: "60%,50%"

# Take screenshot after coloring
- takeScreenshot: screenshots/04_canvas_multicolor

# Switch to Draw mode (tap on mode toggle area at top)
- tapOn:
    point: "65%,12%"
- extendedWaitUntil:
    visible: ".*"
    timeout: 2000

# Take screenshot of draw mode
- takeScreenshot: screenshots/04_canvas_draw_mode

# Go back to category (swipe from left edge)
- swipe:
    start: "3%,50%"
    end: "95%,50%"
    duration: 500

# Handle exit confirmation if shown
- tapOn:
    text: "Exit without saving"
    optional: true

# Verify back at category
- extendedWaitUntil:
    visible: "Animals"
    timeout: 3000
    optional: true
