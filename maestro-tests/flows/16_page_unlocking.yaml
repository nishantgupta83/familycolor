# Test: Page Unlocking & Progression
# ===================================
# Tests unlocking new coloring pages through progression

appId: com.familycolorfun.app

---

# Launch app
- launchApp
- assertVisible: "Category"

# Navigate to Fantasy category (for unicorns/dragons)
- scroll
- tapOn: "Fantasy"
- assertVisible: "Fantasy"
- takeScreenshot: screenshots/16_unlock_01_fantasy

# Check if any pages are locked (look for lock icon)
- takeScreenshot: screenshots/16_unlock_02_locked_pages

# Color a fantasy page to earn stars/unlock more
- tapOn:
    point: "25%,35%"

- extendedWaitUntil:
    visible: "Fill"
    timeout: 5000

- takeScreenshot: screenshots/16_unlock_03_unicorn_blank

# Color with multiple fantasy colors
# Pink for unicorn (9th color)
- tapOn:
    point: "75%,92%"
- tapOn:
    point: "45%,35%"
- tapOn:
    point: "50%,40%"

# Purple for mane (8th color)
- tapOn:
    point: "65%,92%"
- tapOn:
    point: "40%,30%"

# Gold/Yellow for horn (3rd color)
- tapOn:
    point: "25%,92%"
- tapOn:
    point: "48%,20%"

# Blue for sky background (6th color)
- tapOn:
    point: "55%,92%"
- tapOn:
    point: "20%,20%"
- tapOn:
    point: "80%,20%"

- takeScreenshot: screenshots/16_unlock_04_colored

# Complete more regions to potentially earn stars
# Green for grass (5th color)
- tapOn:
    point: "42%,92%"
- tapOn:
    point: "30%,70%"
- tapOn:
    point: "70%,70%"

- takeScreenshot: screenshots/16_unlock_05_progress

# Exit and check if new pages unlocked
- swipe:
    start: "3%,50%"
    end: "95%,50%"
    duration: 500

- tapOn:
    text: "Exit without saving"
    optional: true
- tapOn:
    text: "Save"
    optional: true

- extendedWaitUntil:
    visible: "Fantasy"
    timeout: 5000
    optional: true

- takeScreenshot: screenshots/16_unlock_06_after_coloring
